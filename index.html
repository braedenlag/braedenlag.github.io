<html>
    <div id="content">
        <style>
            body, html {
                margin: 0;
                padding: 0;
            }
        </style>
        <body>
        <div style="width:100%;height:100%;max-width:100%">
            <div id="game"></div>
        </div>
        <script>
            EJS_player = "#game";
            EJS_core = "mgba";
            EJS_pathtodata = "https://cdn.emulatorjs.org/stable/data/";
            EJS_gameUrl = "https://www.lukemouse.com/emerald/random-firered.gba";
            EJS_defaultOptions = {
             'save-state-slot': 1,
             'save-state-location': 'browser'
            }
            EJS_DEBUG_XX = true;
        </script>
        <script>
            function openGame(embed) {
                fetch(embed)
                .then(res => res.text())
                .then(html => win.document.write(html));
            }
        </script>
        <script src="https://cdn.emulatorjs.org/stable/data/loader.js"></script>
    </div>
    <script>
        function onBeforeUnload(e) {
            e.preventDefault();
            e.returnValue = '';
            return;

            delete e['returnValue'];
        }
        window.addEventListener('beforeunload', onBeforeUnload);
        var win = window.open("about:blank", '_blank', 'location=yes')
        win.document.write(document.getElementById("content").innerHTML)
        win.focus();
    </script>
</html>
